---
title: "Linux"
date: 2025-08-29 10:00:00 +0800
categories: [CS basics, Linux] # [Top_category, sub_category]
tags: [linux, log]      # TAG names should always be lowercase
# author:gaoshan
# add image: ![img-description](/assets/img/os.jpg)
---
# Linux操作实验log — Note

电脑一般是有软件和硬件组成
(硬件:计算机系统中,由电子、机械和光电元件等组成的各种物理装置的总称--摸得着的东西; 软件: 是用户和计算机硬件之间的接口和桥梁,用户通过软件和就三级进行交流.而操作系统就是软件的一类)

操作系统是计算机的一种,它主要负责: 作为用户和计算机硬件之间的桥梁, 用于调度和管理计算机硬件进行工作. 没有os(操作系统,operating system) 电脑就是一堆没用的废铁. 而操作系统就是计算机的灵魂: os可以 *1.* 调度cpu、内存、硬盘(做数据存储)、网卡(进行网络通讯)、音响、打印机进行工作
![img-description](/assets/img/os.jpg)

PC操作系统: Windows, Linux, macOS; 移动操作系统: android、ios、harmonyOS; 无论是pc还是移动操作系统,其作用都是调度硬件进行工作,充当用户和硬件之间的桥梁.

Linux系统组成: Linux系统内核 和 系统级应用程序 两部分组成. 

内核提供系统最核心的功能, 如: 调度 cpu、内存、文件系统、网络通讯、IO等.; 
系统级应用程序, 简单理解: 出厂自带程序, 可供用户快速上手操作系统, 如: 文件管理器、任务管理器、图片查看、音乐播放等.

实例: 打开音乐, 无论是用户使用自带的音乐播放器还是用第三方的如qq音乐等, 它们都是由播放程序去调用内核提供的相关功能, 由内核调度cpu解码、音响 发声等.
linux内核是免费且开源的, 这就意味着任何人都可以获得并修改内核, 并且自行集成系统级程序; 提供了内核+系统级程序的完整封装, 称之为linux发行版.

框架: 发行版A: 系统程序A--调用-->内核;  发行版B: 系统程序B--调用-->内核;...而较为知名的Linux发行版有debian、rehat、centOS、ubuntu红旗中标麒麟等等. 不同的发行版中,linux的基础命令是相同的, 少部分操作不同(如:软件安装): 基本上,你可以把一个熟练的 Linux 用户扔到任何一个发行版的终端里，他都能用 ls和 grep来工作。但当他需要安装新软件、重启一个服务或者配置网络时，就必须先搞清楚：“我现在用的是哪个发行版？它用的是什么包管理器和初始化系统？” 
如下:  
一、包管理器（Package Manager）

| 系统 / 发行版                           | 包管理器                | 包格式            | 常用命令示例                     |
| ---------------------------------- | ------------------- | -------------- | -------------------------- |
| **Ubuntu / Debian**                | `apt`（旧称 `apt-get`） | `.deb`         | `sudo apt install vim`     |
| **Fedora / Red Hat / CentOS (旧版)** | `dnf`（旧版用 `yum`）    | `.rpm`         | `sudo dnf install vim`     |
| **Gentoo**                         | `emerge`（Portage）   | 源码包            | `sudo emerge vim`          |
| **Void Linux**                     | `xbps`              | `.xbps`        | `sudo xbps-install -S vim` |
| **macOS**                          | `Homebrew`          | 源码或二进制包        | `brew install vim`         |

macOS 也有 Apple 官方的dmg文件、 pkg 安装包（图形界面安装），但开发者常用 Homebrew。

二、初始化系统（Init System）

| 系统 / 发行版                                                      | 初始化系统（Init System）         | 描述                                  |
| ------------------------------------------------------------- | -------------------------- | ----------------------------------- |
| **Ubuntu / Debian / Fedora / CentOS / RHEL / Arch / Manjaro** | `systemd`                  | 目前主流标准，使用 `systemctl` 管理服务          |
| **openSUSE**                                                  | `systemd`                  | 同上                                  |                        |
| **Slackware**                                                 | `BSD-style init`（SysVinit） | 最传统、简单的方式                           |
| **macOS**                                                     | `launchd`                  | Apple 自研系统守护进程管理器（用 `launchctl` 控制） |


既然有图形化,为什么还选择命令行模式呢? 因为图形化界面消耗资源, 而命令行形式效率更高、占资源更少、程序运行更稳定.

什么是 Linux？

Kernel（内核）：操作系统核心，负责进程调度、内存管理、驱动、系统调用等。

Userspace（用户态）：内核之外运行的程序（shell、服务、应用）。

发行版（distro）：把内核、工具、包管理器、配置组合在一起的系统（如 Ubuntu、Debian、Fedora、CentOS、Arch）。

Shell：命令行解释器，常见有 bash、zsh。用户通过 shell 与系统交互。

---

## Basic commands

* Linux is **case-sensitive**: `echo`, `Echo`, `ECHO` are all different.
* Similar to `print` in Python, `cout` in C++.

**Example**:

```bash
echo "Hello world"
```

---

### Display Current User

```bash
whoami
```

```
gaoshanpan
```

### Get User Information / Group Info

```bash
id
```

```
uid=5000(labex) gid=5000(labex) groups=5000(labex),27(sudo),121(ssl-cert),5002(public)
```

**Breakdown**:

* **uid**: User ID
* **gid**: Primary group ID
* **groups**: All groups you are a member of

👉 `root` is the **superuser**, like the administrator of the system.

---

### Installing Software

Software installation uses a **package manager**. Downloading/installing software should use package manger, which is like an App Store for your phone. `apt` is a widely used package manager for Debian-based systems, such as Ubuntu.

**Example**: Install `htop` (system monitor). It's like a dashboard that gives you a real-time view of what's happening inside your computer.

```bash
sudo apt update
sudo apt install htop
```
**In screenshot, htop shows:**
* **Top**: CPU and memory usage, as well as how long your computer has been running (uptime).
* **Middle**: A list of all the running programs (processes).
* **Bottom**: Options for interacting with htop.

👉 Use arrow keys to navigate, `q` to quit htop when you're done.

---

### Summary (Basics)

* Open & use the terminal
* Basic commands: `echo`, `whoami`, `id`
* Install software (`sudo apt install htop`)
* Monitor system performance (`htop`)

---

## Basic File Operations

* `cd ..` → Move up one level
* `ls ..` → List contents of parent directory
* `ls ~` → List home directory
* `touch file1.txt` → Create empty file (or update timestamp if it exists)
* `echo "Hello, Linux" > file2.txt` → Write to file
* `echo "Hidden file" > .hiddenfile` → Create hidden file
```bash
    ls > file.txt # Overwrites file.txt with the output of 'ls'
    echo "New line" >> file.txt # Appends "New line" to the end of file.txt
```
### Listing Files

* `ls -l` → Long format (permissions, owner, size, date)
* `ls -a` → Show hidden files

### Move / Rename

* `mv file1.txt newfile.txt` → Rename
* `mv newname.txt testdir/` → Move file to directory
* `mv testdir_copy new_testdir` → Rename directory
* `mv testdir/newname.txt ./original_file1.txt` → Move + rename

### Remove

* `rmdir dirname` → Remove empty directory
* `rm file` → Remove file
* `rm -rf dir` → Recursive & force delete (**⚠ dangerous**)

⚠⚠⚠ **Be careful with `rm -rf`.** Example:

```bash
rm -rf /
```

A small typo could delete critical system files or your personal data. There is no undo. For example, rm -rf / could attempt to delete your entire system (if you have permissions). Always double-check the path.

**Other Useful commands**

* `pwd` → Print working directory
* `echo ~` → Display home directory
* `cp -r` → Copy files/directories recursively

---

### Summary (Files)

* Navigate: `cd`, `pwd`
* Create: `touch`, `mkdir`
* List: `ls`, `ls -a`, `ls -l`
* Copy: `cp -r`
* Move/Rename: `mv`
* Delete: `rm`, `rmdir`

---

## File Contents & Comparing

### show all file contents(cat) or part of the content(head, tail)

* `cat -n file.txt` → Show file with line numbers
```sh
# Using less (Recommended): This lets you scroll through the file. press q to exit.
# especially when file is large, and using cat makes it look messy.
# less provides a more user-friendly and powerful experience for viewing and navigating text files in the Linux terminal compared to the more basic more command.
more file.txt # more is less, less is more...
less file.txt 
```
* `head -n1 file.txt` → First line
* `head -c1 file.txt` → First byte
* `tail -n1 file.txt` → Last line
* `tail -c2 file.txt` → Last 2 characters

### Compare Files

```bash
diff file1 file2
```

```
1c1
< this is file1
---
> this is file2
```
Lines starting with <: Indicate lines present only in the first file (file1).
Lines starting with >: Indicate lines present only in the second file (file2).
Lines starting with ---: Act as a separator between changes in the first and second files when a line has been modified.

### Compare Directories

```bash
diff -r ~/Desktop ~/Code
diff -r ..
```

### Manual

```bash
man cat #like help in python
```

---

## File Permissions

Example:

```
-rw-rw-r--  # 由 10 个字符组成：① 第 1 位：文件类型; ② 后 9 位：权限
-rw-r--r--   1 gaoshanpan  staff       28 28 Oct 11:11 file1.txt
drwxr-xr-x  15 gaoshanpan  staff      480 24 Sep 17:53 ENGG5204
```
-rw-r--r-- 就是这个文件用户 (owner)有读写权限  组(group)有只读 其他用户(others)有只读权限
using ls -l to show
* First char: file type (`-` regular file, `d` directory)
* Permissions: read (4), write (2), execute (1) → add up for each digit

### Change Ownership

```bash
sudo chown root:root example.txt
```

* `sudo` → Run with root privileges
* `chown` → Change owner
* `root:root` → Owner & group set to root
* `example.txt` → Target file

```bash
chmod u=rwx, g=rx, o=x file.txt
chmod 777 file.txt # use more frequently
chmod [-R] 777 file或者directory #-R option can be used with chmod to recursively apply permission changes to all files and subdirectories within a directory.
```

### Installation(yum for centos, while in ubuntu,it is apt, mentioned above)
```bash
yum -y install wget
sudo apt install <package-name>
#wget usage: wget url addr
wget https://img...png
```


## Addition
Create user accounts with various specifications.
Set and change user passwords
Modify user account properties
Delete user accounts with and without removing home directories

```bash
# it will delete user account along with /etc/passwd, /etc/shadow, /etc/group, /etc/gshadow..
sudo userdel joker

sudo userdel -r joker # this will delete above and home directory

sudo grep 'joker\|batman' \etc\passwd
```

### grep、管道符、wc
```bash
rm -rf * # remove all file in current dir.
echo 'hello itcast python itheima' > 1.txt # use redirection to overwrite or create.
echo 'world' >> 1.txt
cat 1.txt # catch file; it's like show content

# grep command is using to search/filter content you would like to see.
grep 'world' 1.txt #hight the key word
grep -n 'world' 1.txt # show line number

# wc command: wordcount. -l : number of lines; -c : bytes; -w: word counts; -m: number of character
echo 'aa bbb' > 2.txt
cat 2.txt
aa bbb # there is \n at the end, occupying a byte,2+3+1(space)+1(\n)
wc 2.txt
1 2 7  # return 行数，单词数，字节数

# utf-8 code: one chinese character has 3 bytes

# q: get to know how many files i have in root dir.
ls / # check files in root dir
ls / | wc -w # '|' 管道命令，把前面的执行结果当成后面的输入（数据源）

#using | to combine 

cat 1.txt | grep 'world' | wc -w #先查文件所有内容；然后过滤有world这一行的数据；再统计这一行/几行 的单词数


# vim is like a text editor in windows, there are 3 modes in vi/vim(visual interface), 
vim 1.txt # open file in vim

#how to change ip addr of a machine
vim /etc/sysconfig/network-scripts/ifcfg-ens33 # 进入即可修改，修改完保存后
#重启网卡
systemctl restart network
```
![vim_modes](/assets/img/vim_modes.jpg)

Linux系统很多软件(内置或第三方)均支持使用systemctl命令控制: 启动、停止、开机自启. 能够被systemctl管理的软件, 一般也称之为: 服务 service

系统内置的软件(服务)均可被systemctl控制, 而第三方软件,如果自动注册了可以被systemctl控制(若没自动注册,可以手动注册)
### systemctl-system management command
```bash
# format
systemctl [start | stop | status | disable | enable | restart] 服务名

# services
NetworkManager # 主网络服务
network #副网络服务
firewalld # 防火墙
sshd #ssh服务,远程连接服务协议

# instances
systemctl start firewalld
systemctl disable firewalld # 禁用开机自动启动，而stop就是单纯关停掉了

#if you wanna change ip addr
systemctl stop NetworkManager
systemctl disable NetworkManager
systemctl restart network
ifconfig
```

### 软连接和硬连接 symbolic link and hard link
软连接指向文件路径,而硬连接指向文件的inode(删除原文件后仍可访问)
```bash
# EXAMPLES: 
#Create a symbolic link named /home/src and point it to /usr/src:软连接类似于windows的快捷键.
ln -s /usr/src /home/src  # 类似快捷方式，可跨文件系统；目标删除后，链接失效。
ln -s /etc/sysconfig/network-scripts/ifcfg-ens33 ip # 
# Hard link /usr/local/bin/fooprog to file /usr/local/bin/fooprog-1.0:
ln /usr/local/bin/fooprog-1.0 /usr/local/bin/fooprog #硬连接类似于动态备份(修改一个会导致另个file跟着变)
cp a.txt b.txt #静态备份
ln a.txt b.txt #动态备份
```

### ip, network, port  
```sh
# check ip addr
ifconfig 

#网络传输
#ping用来检查服务器是否可联通,测试网络是否ok
ping www.baidu.com # get backages continuously
ping -c 3 wwww.baidu.com # 3 packages

#wget来下载文件
#curl发起网络请求

#port端口,计算机A通过ip传输到计算器B,而端口保证从微信发到你电脑上的微信而不是QQ
#IP地址,是设备在网络中的唯一标识.
#端口号,是程序在设备上的唯一标识,linux系统的端口号范围(two bytes): 0 ~ 65535
#其中0~1023已经被用作系统端口 或者 保留端口了, 在自定义端口时候,需避免这个范围

# format
netstat -anp # all network port

netstat -anp | grep 3306 # 查看端口3306端口号占用情况 also: netstat -anp | grep mysqld
```

### 进程相关(process)
```sh
# 进程: 指的是可执行程序、文件;  pid, .exe后缀
ps -ef #查看本机的所有进程, -e shows all process, -f shows using format
ps -ef | grep mysql #查看本机和mysql相关的进程

# 强制关闭process
kill -9 pid # 根据pid值,强制杀死进程; 不加-9则根据进程自身决定是否最后杀死
```

### upload and download
```sh
yum -y install lrzsz # in centos
sudo apt install lrzsz # in ubuntu

rz # upload; using this command: mv ‘乱码’.txt rkl.txt
sz files.txt # download files from servers to local machine
```

### 压缩和解压缩
```sh
# 压缩有很多种,zip、tar.gz、rar、gzip....
# 区分压缩协议的好坏, 可以参考三个维度: 压缩速度(写),解压速度(读),压缩后文件占比
# tarball,归档操作
# 压缩 格式, z:gzip协议,  c: 创建,  v:显示过程. f:文件
tar -cvf 压缩包名.tar 要被压缩的文件1 文件2 ... # 只归档不压缩
tar -zcvf 压缩包名.tar 要被压缩的文件1 文件2 ...  #采用tarball + gzip协议,压缩

#解压
tar -xvf 压缩包名.tar [-C] [解压到的路径]
tar -zxvf 压缩包名.tar [-C] [解压到的路径] #

tar -zxvf my2.tar.gz -C /home # 解压到根目录下的home
tar -zxvf my2.tar.gz -C home #解压到当前目录下的home
#zip协议如上
zip test.zip a.txt b.txt

zip -r test.zip a.txt b.txt #The zip -r command in Linux is used to create a ZIP archive of a directory and its contents recursively.
upzip # using -d 去指定路径


```
---