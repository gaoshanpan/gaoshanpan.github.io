---
title: "MySQL"
date: 2025-08-29 10:00:00 +0800
categories: [CS basics, Mysql] # [Top_category, sub_category]
tags: [sql]      # TAG names should always be lowercase
# author:gaoshan
---

data explosion ==> storage securely, process efficiently

### 1. 存储数据的方式有哪些?
```sql
-- 方式1: 变量,列表等, 只能临时存储数据,程序执行结束,数据就丢失了
-- 方式2: 文件存储,可以永久存储数据,但是不方便用户做精细化管理
-- 方式3: 数据库方式存储数据库.

数据库指的是存储数据的仓库,本质是1个文件系统,可以有规律的对数据进行存储,方便用户对数据做精细化管理操作.CRUD:增删改查.
```

### 2. 问:你用的什么数据库? 答:
那DBMS(database management system) = 软件, 如: mysql,oracle, SQLservers, DB2.. 
with version (mysql8有窗口函数,就是询问你有没有用过)


### DBMS(软件)和数据库的关系是?

主仆关系：:DBMS 是管理和操纵数据库的工具，数据库是DBMS 管理的对象。
不可分割：:现代数据库系统通常需要DBMS 来进行有效管理，用户通过DBMS 才能与数据库进行交互。
一个软件对应一个或多个数据库：:一个DBMS 可以管理一个或多个数据库实例
![img-description](/assets/img/database.jpg)

图片解释:
一个软件里可以建很多个数据库(一般开发中,一个项目=一个数据库)
一个数据库会有很多个表(而一类实体组成一张表)
一张表有很多实体(如: user用户表里有 id, name, scores,...)

### 3. 常说的关系型数据库和非关系数据库
**关系型数据库**: 指的是采用了关系模型来组织数据的数据库/ 采用了数据表(二维表)的形式存储数据,且表之间有关系
关系类型:3种,以下:
**一对多:**一个部门对应多个员工,但一个员工只隶属于一个部门
**多对多:**商品订单,一个订单里有多个商品,而一个商品也可以出现在不同人的订单里; 学生和老师,一个老师对应多个学生;而学生也有数学、语文老师等等
**一对一:**..

**非关系型数据库**: 又被称为NoSQL(not only SQL),意为采用键值对(key-value),文档等形式来存储数据,如:JSON、XML 或BSON 格式

### 4. 常见的数据库有哪些?
```sql

-- 关系型数据库,RDBMS型
MySQL, Oracle, SQLserver,BD2, Sybase, SQLite
-- 非关系型数据库,NoSQL型
Redis, HBase, MongoDB
-- 选择MySQL,就像学普通话,其他的数据库也能用
```
环境搭建:下载(略); 记得加入path环境变量
path检索是至上而下的,要保持没有其他的sql配置在他上面

闪退: 抢端口了
删除mysql后记得将注册表也删除,具体操作用到了找教程;以及如何用IDE连接mysql;
用命令行直接写,不方便修改;

### 5. Mysql的图形化管理工具
Background: 在DOS(command line)窗口中写SQL语句,一方面没有提示,一方面写错了不可以修改,弊大于利;因此实际开发中,一般使用SQL的图形化管理工具来编写SQL.

常见的SQL的图形化工具:
Navicat、DBeaver、MySQL Workbench和SQLyog；以及用于数据分析和商业智能的工具，如Tableau和Power BI；还有Web界面工具，如phpMyAdmin和FineReport等，它们都能提供直观的界面来操作和可视化数据库数据。

IDE:integrated development environment(集成开发环境) = 软件,集代码的编写,编译,运行调试,排除,提示等一系列功能于一体的软件. 

工具描述具体到版本.

```sh
#Installation:
sudo apt update
sudp apt install mysql-server -y

#check the stauts
sudo service mysql status

sudo service mysql start
# log in operation
sudo mysql -u root -p # press enter and log in with password.
sudo mysql -u root # no password
#sudo service mysql stop

```
After accessing the mysql shell (NO case senstive for sql command,  but has case-sensitivity of database names)
we can see welcome message and mysql prompt.
```sql
SHOW DATABASES; # this command lists all the databases present in your MySQL server. output be like:
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.00 sec)
-- information_schema: This is a database that provides access to database metadata.
-- mysql: This database contains information required by the MySQL server for its operation.
-- performance_schema: This database provides a way to inspect internal execution of the server at runtime.
-- sys: This database contains a set of objects that help DBAs and developers interpret data collected by the performance_schema.


USE mysql; -- Switch to a database(mysql)
SHOW TABLES;

DESCRIBE user; -- this would show you all the columns in the 'user' table.

exit; -- bye
```
### 6. 常见数据类型
variable character= string in python、java.
字符串:varchar(n) n是字符串的长度,变长
整数:int
浮点型:decimal、float、double
日期:date,time,datetime

### 7.DDL语句--操作数据库、数据表、列名/字段(大小写不区分) DDL: data definition language; using to modifying attributes of databases and tables.
key words: create、drop、alter、show..
单句执行: ctrl + enter; 或者选中执行
```sql
-- 1.查看所有的数据库
show databases;

-- 2. 创建数据库,采用默认码表.
-- 格式: create database if not exists 数据库名 charset ’码表名‘;
create database day01;

-- 3. 创建数据库,采用指定码表.
create database day02 charset ‘gbk’;

-- 4. 创建数据,如果数据库存在.
create database if not exists day01;

-- 5. 查看(单个)数据库的详细信息(码表)
show create database day01; 
show create database day01;

-- 6. 修改数据库的(码表)
alter database day02 charset ‘utf8’ -- 实际开发不敢用

-- 7. 删除指定的数据库
drop database day02;
drop database day03;

-- 8. 切库(建表前记得这个操作)
use day01;

-- 9 查看当前使用的是哪个数据库.(鸡肋)
select database();
```


```sh
# we can also use an alternative method to create and drop a database in shell command line

mysqladmin -u root -p hello-world2
mysqladmin -u root -p drop hello_world2 # shell command
```

**Retrieving metadata.**
```sql
# Retrieving MySQL Metadata
SELECT VERSION();
SELECT DATABASE(); # show the current database name or NULL if no database is selected
SELECT User(); # see the current user
SHOW Status; #view all server status indicators
SHOW VARIABLES;
```

### 8. DDL语句--操作数据表
```sql
/* Understanding and using different MySQL data types
Creating tables with appropriate constraints
Modifying table structures using ALTER TABLE
Retrieving table metadata and information
Safely dropping tables when they're no longer needed */
-- 0. 切库
use day01;

-- 1. 查看(当前数据库中)所有表
show tables;

-- 2. 创建数据表,采用默认码表 utf-8(随库姓.)
create table products;
create table [if not exists] 数据表名(
    列名1 数据类型 [约束],
    列名2 数据类型 [约束],
    列名3 数据类型 [约束],
    ...
    列名n 数据类型 [约束] # 最后一个列名没有分隔,逗号
);
-- 需求: 创建学生数据表student,字段(学生编码,姓名 非空约束, 性别,年龄)
create table if not exists student_table(
    id int,
    name varchar(10) not null,
    gender varchar(5),
    age int
);
-- 3. 查看(单个)数据表的详细信息(码表)
show create table table_name;
show create table student_table;

desc student_table; # 1.describe查看表的字段、数据类型、约束等..; 降序

-- 4. 修改数据表的(表名).
rename table student_table to stu; # alter也行
alter table student_table to stu;

-- 5. 删除指定的数据表(开发环境一般不用)
drop table stu;
```
### 9. DDL语句--操作表结构/字段 (了解)
```sql
-- 1. 查看表
desc student;

-- 2. 给表 新增列, 可能会用到 ********其他在实际中用不到,用到gpt就行了******
alter table student add kongfu varchar(20) not null;

-- 3. 修改列, 数据类型 和 约束
alter table student modify kongfu int not null; -- 不加约束,则约束跟新为无

-- 4. 修改列, 列名 数据类型 和 约束 kongfu --> gf
alter table student change kongfu gf varchar(10) not null

-- 5. 删除指定列
alter table student drop gf; #kongfu
```

### 10. DML语句--操作表数据
DML:数据操作manipulation语言, 对数据做增、删和改 (查是DQL)
```sql
--- 切库
use day01;

# -- case1: DML语句 操作数据客户 增
/* 
格式:
    insert into 表名(列名1, 列名2...) values(值1, 值2..);
    insert into 表名 values(值1, 值2..);
    insert into 表名 values(null, 值2..);

    insert into 表名 values
        (值1, 值2..),
        (值1, 值2..),
        ....
        (值1, 值2..);

    细节:
    1. 添加表数据时:值的个数和类型,要和 列名 保持一致.
    2. 如果不写列名,则默认是全列名, 即: 必须给所有的列依次赋值.
    3. 如果是主键列且配合有自增,则: 传值的时候,可以直接传入null,系统会根据最大主键值 + 1
    4. 如果同时添加多行值, 多组值之间用逗号隔开, 最后一组不用
 */

 --- 添加单条数据:
insert into student(id, name, gender, age) values (1, ‘山哥’, ‘男’, 24);
insert into student(name, age) values (‘高哥’, 30);
insert into student(gender, age) values(‘男’,‘21’); -- error, name is set to be not null
insert into student(name, gender, age) values(‘猪桑’,‘男’,‘21’);


 --- 添加多条数据:
 insert into student values
    (1,‘苏锦’, ‘女’, 23),
    (2,‘吴锦’, ‘男’, 33),
    (3,‘苏池’, ‘女’, 24);



# -- case2: DML语句 操作数据客户 改
-- 格式: update 表名 set 字段名1=新值, 字段名2=新值... where 条件
update student set id=10, name='祥子' where id = 1;
update student set id=10, name='祥子';# -- 如果不写where则全被改了,将所有内容都更新为相同的内容

# -- case3: DML语句 操作数据客户 删

delete from student where age > 25;
delete from student; # 不小心删完,赶紧报告,不然公司要吊死你

# -- case4: DQL语句:简单查询 DML语句 操作数据客户 查
select * from student;
select * from day01.student; #数据库名.表名
```